<!doctype html>
<html>
  <head>
	<meta charset="utf-8" />
	<title>Mini App Demo</title>
	<style>
	  body {
		  height: 100dvh;
		  display: grid;
		  grid-template-rows: 10dvh 70dvh 20dvh;
		  margin: 0;
		  text-align: center;
		  font-family: sans-serif;
		  font-size: 20px;
	  }

	  body > * {
		  align-content: center;
	  }

	  header { background-color: #008822; color: #fff; }
	  main { background-color: #f1f1f1; }
	  button {
		  background-color: #881122;
		  color: #fff;
		  border: none;
	  }

	  #bg {
		  background-color: #3d3d3d;
		  position: fixed;
		  top: 0;
		  left: 0;
		  right: 0;
		  height: 100dvh;
		  z-index: -1;
	  }

	  main, img {
		  max-height: 100%;
		  max-width: 100%;
	  }
	</style>
  </head>
  <body>
	<div id="bg"></div>
	<header>
	  <h1>KittenMatch</h1>
	</header>
	<main>
	  <img src="https://cataas.com/cat" />
	</main>
	<button>
	  Like!
	</button>
	<script type="module">
	  import bridge from "https://esm.run/@vkontakte/vk-bridge"

	  bridge.send("VKWebAppInit");

	  // bridge.send('VKWebAppAllowNotifications').catch()
	  const likeBtn = document.querySelector('button')
	  const catAvatar = document.querySelector('img')

	  likeBtn.addEventListener('click', (e) => {
		  likeBtn.disabled = true
		  catAvatar.setAttribute('src', `https://cataas.com/cat?time=${Date.now()}`)
		  catAvatar.addEventListener('load', () => { likeBtn.disabled = false })
	  })
	</script>
  </body>
</html>
